import{d as J,u as K,r as Q,a as g,c as P,b as m,o as _,e as s,w as i,f as C,g as e,E as W,h as X,i as o,j as h,k as Y,l as w,m as v,t as l,n as F,p as Z,F as M,q as ee,s as te,v as T,x as re,y as le,z as I,A as oe,B as ae,C as se,D as de,_ as ie}from"./index-BEPk7Ggo.js";const ce={class:"credit-card-apr-calculator"},ne={class:"card-header"},ue={key:0,style:{color:"#F56C6C","font-size":"12px","margin-top":"5px"}},pe={class:"form-actions"},fe={key:0,class:"calculation-result"},Pe={class:"result-item"},_e={class:"result-label"},me={class:"result-value"},he={class:"result-item"},ve={class:"result-label"},be={class:"result-value"},Ce={class:"result-item"},Fe={class:"result-label"},ye={class:"result-value"},Ae={class:"result-item"},Me={class:"result-label"},ke={class:"result-value"},Ve={class:"result-item"},Re={class:"result-label"},xe={class:"result-value"},Ee={class:"result-item"},Ue={class:"result-label"},Be={class:"result-value"},ge={class:"result-item"},we={class:"result-label"},Te={class:"result-value"},Ie={key:0,class:"result-item"},Ne={class:"result-label"},De={class:"result-value"},ze={class:"result-item"},Le={class:"result-label"},Oe={class:"result-value"},Se={class:"result-item apr-result"},$e={class:"result-label"},je={class:"result-value highlight"},qe=J({__name:"CreditCardApr",setup(Ge){const{t:r}=K(),t=Q({principal:1e4,periods:12,feeRate:3,calculationMethod:"feeRate",frontPeriods:8,frontFee:0,backFee:0}),N=[3,6,12,18,24,36,48,60],u=g({totalFee:0,monthlyPayment:0,apr:0,principalPerPeriod:0,feePerPeriod:0,lastPeriodFee:0}),y=g(!1),D=P(()=>{if(t.calculationMethod==="feeRate")return t.principal*(t.feeRate/100);if(t.calculationMethod==="feePerPeriod"&&t.frontPeriods>0&&t.frontPeriods<t.periods){const c=t.frontPeriods*t.frontFee,a=(t.periods-t.frontPeriods)*t.backFee;return c+a}return 0}),A=P(()=>t.principal/t.periods),b=P(()=>t.calculationMethod==="feeRate"?t.principal*(t.feeRate/100)/t.periods:t.calculationMethod==="feePerPeriod"?t.frontFee:0),x=P(()=>t.calculationMethod==="feePerPeriod"?t.backFee:b.value),E=P(()=>t.calculationMethod==="feePerPeriod"?t.backFee:b.value),k=P(()=>{const c=A.value,a=b.value;return c+a}),U=P(()=>{const c=A.value,a=x.value;return c+a}),z=P(()=>{if(t.calculationMethod==="feePerPeriod"){const c=k.value*t.frontPeriods,a=U.value*(t.periods-t.frontPeriods);return(c+a)/t.periods}return k.value}),L=()=>{const c=A.value,a=b.value,d=x.value,f=t.periods,n=[-t.principal];if(t.calculationMethod==="feePerPeriod"){for(let p=0;p<t.frontPeriods;p++)n.push(c+a);for(let p=t.frontPeriods;p<f;p++)n.push(c+d)}else{for(let p=0;p<f-1;p++)n.push(c+a);n.push(c+E.value)}return O(n)*12*100},O=(c,a=.1,d=100,f=1e-7)=>{let n=a;for(let V=0;V<d;V++){const p=S(c,n),B=$(c,n);if(Math.abs(B)<f)break;const R=n-p/B;if(Math.abs(R-n)<f){n=R;break}n=R}return n},S=(c,a)=>c.reduce((d,f,n)=>d+f/Math.pow(1+a,n),0),$=(c,a)=>c.reduce((d,f,n)=>n===0?d:d-n*f/Math.pow(1+a,n+1),0),j=()=>{u.value={totalFee:D.value,monthlyPayment:z.value,apr:L(),principalPerPeriod:A.value,feePerPeriod:b.value,lastPeriodFee:E.value},y.value=!0},q=P(()=>t.calculationMethod==="feePerPeriod"?t.frontPeriods>0&&t.frontPeriods<t.periods:!0),G=()=>{t.principal=1e4,t.periods=12,t.feeRate=3,t.frontPeriods=8,t.frontFee=0,t.backFee=0,t.calculationMethod="feeRate",y.value=!1},H=()=>{t.calculationMethod==="feeRate"?(t.frontFee=0,t.backFee=0):t.calculationMethod==="feePerPeriod"&&(t.feeRate=0),y.value=!1};return(c,a)=>(_(),m("div",ce,[s(e(de),{class:"calculator-card"},{header:i(()=>[o("div",ne,[s(e(I),null,{default:i(()=>[s(e(se))]),_:1}),o("span",null,l(e(r)("tools.creditCardApr.name")),1)])]),default:i(()=>[s(e(W),{model:t,"label-position":"top"},{default:i(()=>[s(e(h),{label:e(r)("tools.creditCardApr.calculationMethod")},{default:i(()=>[s(e(Y),{modelValue:t.calculationMethod,"onUpdate:modelValue":a[0]||(a[0]=d=>t.calculationMethod=d),onChange:H},{default:i(()=>[s(e(w),{label:"feeRate"},{default:i(()=>[v(l(e(r)("tools.creditCardApr.feeRateMethod")),1)]),_:1},8,["label"]),s(e(w),{label:"feePerPeriod"},{default:i(()=>[v(l(e(r)("tools.creditCardApr.feePerPeriodMethod")),1)]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label"]),s(e(h),{label:e(r)("tools.creditCardApr.principal")},{default:i(()=>[s(e(F),{modelValue:t.principal,"onUpdate:modelValue":a[1]||(a[1]=d=>t.principal=d),modelModifiers:{number:!0},type:"number",placeholder:e(r)("tools.creditCardApr.inputPrincipal")},{prefix:i(()=>[o("span",null,l(e(r)("tools.creditCardApr.currency")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),s(e(h),{label:e(r)("tools.creditCardApr.periods")},{default:i(()=>[s(e(Z),{modelValue:t.periods,"onUpdate:modelValue":a[2]||(a[2]=d=>t.periods=d),style:{width:"100%"}},{default:i(()=>[(_(),m(M,null,ee(N,d=>s(e(te),{key:d,label:`${d} ${e(r)("tools.creditCardApr.periodUnit")}`,value:d},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t.calculationMethod==="feeRate"?(_(),X(e(h),{key:0,label:e(r)("tools.creditCardApr.feeRate")},{default:i(()=>[s(e(F),{modelValue:t.feeRate,"onUpdate:modelValue":a[3]||(a[3]=d=>t.feeRate=d),modelModifiers:{number:!0},type:"number",placeholder:e(r)("tools.creditCardApr.inputFeeRate")},{suffix:i(()=>[o("span",null,l(e(r)("tools.creditCardApr.rateUnit")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):C("",!0),t.calculationMethod==="feePerPeriod"?(_(),m(M,{key:1},[s(e(h),{label:e(r)("tools.creditCardApr.frontPeriods")||"前几期数量"},{default:i(()=>[s(e(F),{modelValue:t.frontPeriods,"onUpdate:modelValue":a[4]||(a[4]=d=>t.frontPeriods=d),modelModifiers:{number:!0},type:"number",placeholder:e(r)("tools.creditCardApr.inputFrontPeriods")||"请输入前几期数量"},{suffix:i(()=>[o("span",null,l(e(r)("tools.creditCardApr.periodUnit")),1)]),_:1},8,["modelValue","placeholder"]),q.value?C("",!0):(_(),m("div",ue,l(e(r)("tools.creditCardApr.frontPeriodsError")||"前几期数量必须大于0且小于总期数"),1))]),_:1},8,["label"]),s(e(h),{label:e(r)("tools.creditCardApr.frontFee")||"前几期手续费"},{default:i(()=>[s(e(F),{modelValue:t.frontFee,"onUpdate:modelValue":a[5]||(a[5]=d=>t.frontFee=d),modelModifiers:{number:!0},type:"number",placeholder:e(r)("tools.creditCardApr.inputFrontFee")||"请输入前几期手续费"},{prefix:i(()=>[o("span",null,l(e(r)("tools.creditCardApr.currency")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),s(e(h),{label:e(r)("tools.creditCardApr.backFee")||"后几期手续费"},{default:i(()=>[s(e(F),{modelValue:t.backFee,"onUpdate:modelValue":a[6]||(a[6]=d=>t.backFee=d),modelModifiers:{number:!0},type:"number",placeholder:e(r)("tools.creditCardApr.inputBackFee")||"请输入后几期手续费"},{prefix:i(()=>[o("span",null,l(e(r)("tools.creditCardApr.currency")),1)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])],64)):C("",!0),o("div",pe,[s(e(T),{type:"primary",onClick:j},{default:i(()=>[v(l(e(r)("common.calculate")),1)]),_:1}),s(e(T),{onClick:G},{default:i(()=>[v(l(e(r)("common.reset")),1)]),_:1})])]),_:1},8,["model"]),y.value?(_(),m("div",fe,[s(e(re),null,{default:i(()=>[v(l(e(r)("common.result")),1)]),_:1}),o("div",Pe,[o("span",_e,l(e(r)("tools.creditCardApr.totalFee"))+":",1),o("span",me,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.totalFee.toFixed(2)),1)]),o("div",he,[o("span",ve,l(e(r)("tools.creditCardApr.principalPerPeriod"))+":",1),o("span",be,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.principalPerPeriod.toFixed(2)),1)]),t.calculationMethod==="feePerPeriod"?(_(),m(M,{key:0},[o("div",Ce,[o("span",Fe,l(e(r)("tools.creditCardApr.frontFee")||"前几期手续费")+":",1),o("span",ye,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.feePerPeriod.toFixed(2)),1)]),o("div",Ae,[o("span",Me,l(e(r)("tools.creditCardApr.backFee")||"后几期手续费")+":",1),o("span",ke,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.lastPeriodFee.toFixed(2)),1)]),o("div",Ve,[o("span",Re,l(e(r)("tools.creditCardApr.frontMonthlyPayment")||"前几期月供")+":",1),o("span",xe,l(e(r)("tools.creditCardApr.currency"))+" "+l(k.value.toFixed(2)),1)]),o("div",Ee,[o("span",Ue,l(e(r)("tools.creditCardApr.backMonthlyPayment")||"后几期月供")+":",1),o("span",Be,l(e(r)("tools.creditCardApr.currency"))+" "+l(U.value.toFixed(2)),1)])],64)):(_(),m(M,{key:1},[o("div",ge,[o("span",we,l(e(r)("tools.creditCardApr.feePerPeriod"))+":",1),o("span",Te,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.feePerPeriod.toFixed(2)),1)]),u.value.lastPeriodFee!==u.value.feePerPeriod?(_(),m("div",Ie,[o("span",Ne,l(e(r)("tools.creditCardApr.lastPeriodFee"))+":",1),o("span",De,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.lastPeriodFee.toFixed(2)),1)])):C("",!0)],64)),o("div",ze,[o("span",Le,l(e(r)("tools.creditCardApr.monthlyPayment"))+":",1),o("span",Oe,l(e(r)("tools.creditCardApr.currency"))+" "+l(u.value.monthlyPayment.toFixed(2)),1)]),o("div",Se,[o("span",$e,[v(l(e(r)("tools.creditCardApr.apr"))+": ",1),s(e(le),{content:e(r)("tools.creditCardApr.aprFormula"),placement:"top"},{default:i(()=>[s(e(I),null,{default:i(()=>[s(e(oe))]),_:1})]),_:1},8,["content"])]),o("span",je,l(u.value.apr.toFixed(2))+l(e(r)("tools.creditCardApr.rateUnit")),1)]),s(e(ae),{type:"info",title:e(r)("tools.creditCardApr.disclaimer"),closable:!1,"show-icon":""},null,8,["title"])])):C("",!0)]),_:1})]))}}),Je=ie(qe,[["__scopeId","data-v-d5832f3f"]]);export{Je as default};
